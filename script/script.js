(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function setDayBeginning(e){e.setHours(0,0,0,0)}exports.getMonday=function(e){var t=new Date(e);return t.setDate(t.getDay()>=6?t.getDate()+2:t.getDate()-t.getDay()+1),setDayBeginning(t),t},exports.setDayBeginning=setDayBeginning;
},{}],2:[function(require,module,exports){
var options=require("./options.js"),mobile=require("./mobile.js"),nav=require("./nav.js"),dateUtil=require("./dateUtil.js"),schedule=require("./schedule.js");addEventListener("scroll",function(){document.getElementById("header").style.left=scrollX+"px"}),Array.prototype.diff=function(e){return this.filter(function(i){return e.indexOf(i)<0})},addEventListener("load",function(){mobile.init(),nav.init(),schedule.init(),options.init()});
},{"./dateUtil.js":1,"./mobile.js":3,"./nav.js":4,"./options.js":5,"./schedule.js":6}],3:[function(require,module,exports){
function isMobile(){var e=navigator.userAgent||navigator.vendor||window.opera;return window.innerWidth<=800&&window.innerHeight<=600?!0:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}exports.init=function(){var e=exports.isMobile=isMobile();if(e){var i=document.createElement("meta");i.name="viewport",i.content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0",document.getElementsByTagName("head")[0].appendChild(i),document.getElementsByTagName("body")[0].class="mobile"}};
},{}],4:[function(require,module,exports){
function setTitleTitle(){var e=document.getElementById("titleTitles").textContent.split("\n");document.getElementById("title").title=e[Math.floor(Math.random()*e.length)]}function updateUrlParams(){urlParams={};for(var e,t=/(?!^)\+/g,a=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(t," "))},l=location.search.substring(1);e=a.exec(l);)urlParams[r(e[1])]=r(e[2])}function getDateFromUrlParams(){var e=new Date;return urlParams.y>0&&e.setFullYear(urlParams.y),urlParams.m>0&&e.setMonth(urlParams.m-1),urlParams.d>0&&e.setDate(urlParams.d),viewType==viewTypes.WEEK&&(e=dateUtil.getMonday(e)),e}function goPrev(){var e=new Date(displayDate);e.setDate(e.getDate()-(viewType==viewTypes.DAY?1:7)),updateSchedule(e),updateSearch(e)}function goNext(){var e=new Date(displayDate);e.setDate(e.getDate()+(viewType==viewTypes.DAY?1:7)),updateSchedule(e),updateSearch(e)}function goCurr(){var e=new Date;updateSchedule(e),updateSearch(e)}function updateSearch(e){var t=new Date;viewType==viewTypes.WEEK&&(t=dateUtil.getMonday(t)),e.getDate()!=t.getDate()?(urlParams.m=e.getMonth()+1,urlParams.d=e.getDate()):(delete urlParams.m,delete urlParams.d),e.getYear()!=t.getYear()?urlParams.y=e.getFullYear().toString().substr(-2):delete urlParams.y;var a="?";for(var r in urlParams)a+=r+"="+urlParams[r]+"&";a=a.slice(0,-1),history.pushState(e,document.title,location.protocol+"//"+location.host+location.pathname+a+location.hash)}var dateUtil=require("./dateUtil.js"),urlParams,viewType;exports.init=function(){updateUrlParams(),window.history.replaceState(getDateFromUrlParams()),document.getElementById("header").addEventListener("click",setTitleTitle),document.getElementById("leftArrow").addEventListener("click",goPrev),document.getElementById("rightArrow").addEventListener("click",goNext),document.getElementById("refresh").addEventListener("click",function(){updateSchedule(null,!0)}),setTitleTitle()},exports.setViewType=function(e){viewType=e};var viewTypes=exports.viewTypes={DAY:"day",WEEK:"week"};addEventListener("popstate",function(e){updateUrlParams(),updateSchedule(e.state)}),exports.getDateFromUrlParams=getDateFromUrlParams;
},{"./dateUtil.js":1}],5:[function(require,module,exports){
function expandOptions(){document.getElementById("options").classList.add("expanded"),document.getElementById("optionsArrow").innerHTML="&#8600;"}function contractOptions(){document.getElementById("options").classList.remove("expanded"),document.getElementById("optionsArrow").innerHTML="&#8598;"}function toggleOptions(){document.getElementById("options").classList.contains("expanded")?contractOptions():expandOptions()}function initOptions(){var e=document.getElementById("options");e.addEventListener("mouseover",expandOptions),e.addEventListener("mouseout",contractOptions),isMobile&&e.classList.add("mobile"),document.getElementById("optionsArrow").addEventListener("click",toggleOptions);var t=e.getElementsByTagName("input");localStorage.updateScheduleInterval&&(localStorage.activeUpdateInterval=localStorage.updateScheduleInterval,localStorage.removeItem("updateScheduleInterval"));for(var n=0;n<t.length;n++){var o=t[n];"checkbox"==o.type?(o.addEventListener("change",function(e){options[e.target.name]=localStorage[e.target.name]=e.target.checked}),options[o.name]=localStorage[o.name]?o.checked="true"==localStorage[o.name]:localStorage[o.name]=o.checked):"number"==o.type?(o.addEventListener("change",function(e){options[e.target.name]=parseInt(localStorage[e.target.name]=e.target.value)}),options[o.name]=parseInt(localStorage[o.name]?o.value=localStorage[o.name]:localStorage[o.name]=o.value)):(o.addEventListener("change",function(e){options[e.target.name]=localStorage[e.target.name]=e.target.value}),options[o.name]=localStorage[o.name]?o.value=localStorage[o.name]:localStorage[o.name]=o.value)}}function createOptions(e){JSON.parse(e).sections.forEach(function(e){(!e.hasOwnProperty("platforms")||isMobile&&e.platforms.indexOf("mobile")>=0||!isMobile)&&createOptionSection(e)}),initOptions(),attachOptionActions(),schedule.updateSchedule(null,!0)}function displayOptionsError(e){schedule.updateSchedule(),warn(e?"Retrieval of options.json timed out!":"Something went wrong while retrieving options.json!")}function createOptionSection(e){createOptionSectionTitle(e),e.options.forEach(function(e){(!e.hasOwnProperty("platforms")||isMobile&&e.platforms.indexOf("mobile")>=0||!isMobile)&&createOption(e)})}function createOptionSectionTitle(e){var t=document.createElement("tr"),n=document.createElement("th");if(n.colspan=2,e.hasOwnProperty("tooltip")){var o=document.createElement("span");o.title=e.tooltip,o.innerHTML=e.name+'<sup class="tooltipIndicator">?</sup>',n.appendChild(o)}else n.textContent=e.name;t.appendChild(n),document.getElementById("optionsContent").appendChild(t)}function createOption(e){var t=document.createElement("tr"),n=document.createElement("td"),o=document.createElement("td");if(e.hasOwnProperty("tooltip")){var a=document.createElement("span");a.title=e.tooltip,a.innerHTML=e.description+'<sup class="tooltipIndicator">?</sup>:',n.appendChild(a)}else n.textContent=e.description+":";var i=document.createElement("input");i.name=e.name,i.type=e.type;var s=isMobile&&e.hasOwnProperty("mobileDefault")?e.mobileDefault:e.default;"number"==i.type?(i.min=0,i.value=s):"checkbox"==i.type&&s&&(i.checked="checked"),o.appendChild(i),t.appendChild(n),t.appendChild(o),document.getElementById("optionsContent").appendChild(t)}function attachOptionActions(){schedule.updateUpdateInterval(),document.getElementsByName("activeUpdateInterval")[0].addEventListener("change",function(){schedule.updateUpdateInterval()}),document.getElementsByName("showPassingPeriods")[0].addEventListener("change",function(){schedule.updateSchedule(null,!0)}),document.getElementsByName("enablePeriodNotifications")[0].addEventListener("change",function(){if(options.enablePeriodNotifications){var e=Notification.permission;"Notification"in window?"denied"==e?alert("Please allow desktop notifications for this site to enable this feature."):"default"==e&&Notification.requestPermission():alert("This browser does not support desktop notifications.")}}),document.body.classList.add(options.enableDayView?"day":"week"),nav.setViewType(options.enableDayView?nav.viewTypes.DAY:nav.viewTypes.WEEK),document.getElementsByName("enableDayView")[0].addEventListener("change",function(){schedule.updateSchedule(null,!0),document.body.classList.remove("week"),document.body.classList.remove("day"),nav.setViewType(options.enableDayView?nav.viewTypes.DAY:nav.viewTypes.WEEK),nav.setViewType(options.enableDayView?"day":"week"),scrollTo(0,0)}),isMobile||(document.addEventListener("keydown",function(e){switch(e.keyCode){case 116:options.interceptF5&&(e.preventDefault(),schedule.updateSchedule());break;case 82:options.interceptCtrlR&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),schedule.updateSchedule());break;case 37:goPrev();break;case 39:goNext();break;case 40:goCurr()}}),setDoge(options.enableDoge),document.getElementsByName("enableDoge")[0].addEventListener("change",function(e){setDoge(e.target.checked)}))}function download(e,t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText):n&&n(!1,o.status))},o.ontimeout=function(){n(!0,null)},o.send()}var mobile=require("./mobile.js"),nav=require("./nav.js"),schedule=require("./schedule.js"),isMobile=mobile.isMobile,options={};exports.options=options,exports.init=function(){download("options.json",createOptions,displayOptionsError)};
},{"./mobile.js":3,"./nav.js":4,"./schedule.js":6}],6:[function(require,module,exports){
function updateUpdateInterval(){setUpdateInterval(document.hidden?opts.hiddenUpdateInterval:hasFocus?opts.activeUpdateInterval:opts.inactiveUpdateInterval)}function setUpdateInterval(e){clearInterval(updateScheduleID),updateScheduleID=e>0?setInterval(function(){updateSchedule()},1e3*e):null}function parseRawSchedules(){var e=document.getElementById("schedules").textContent.split("\n");schedules=new Array;var t=0;for(schedules[0]=new Array;e.length>0;)if(0==e[0].length)schedules[++t]=new Array,e.shift();else{var a=e.shift();if(0==t&&a.indexOf("|")>=0)for(var n=new Date(a.substring(0,a.indexOf("|"))),d=new Date(a.substring(a.indexOf("|")+1,a.indexOf("	")));d>=n;n.setDate(n.getDate()+1))schedules[0].push(n.getMonth().valueOf()+1+"/"+n.getDate()+"/"+n.getFullYear().toString().substr(-2)+a.substring(a.indexOf("	")));else schedules[t].push(a)}}function setDisplayDate(e,t){var a=e?new Date(e):nav.getDateFromUrlParams();if(dateUtil.setDayBeginning(a),t||!displayDate||a.valueOf()!=displayDate.valueOf()){var n=document.getElementById("schedule");for(displayDate=new Date(a),warn(dateUtil.getMonday(a)>dateUtil.getMonday(new Date)?"This is a future date, so the schedule may be incorrect. (In particular, special/alternate schedules may be missing.)":"");n.rows.length;)n.deleteRow(-1);var d=n.insertRow(-1);if(opts.enableDayView)createDay(d,a);else{a=dateUtil.getMonday(a);for(var s=0;5>s;s++)createDay(d,a),a.setDate(a.getDate()+1)}}}function warn(e){var t=document.getElementById("warning");t.style.display=e?"block":"none",t.innerHTML=e}function createDay(e,t){var a=getDayInfo(t),n=e.insertCell(-1);n.date=t.valueOf(),9==t.getMonth()&&31==t.getDate()&&n.classList.add("halloween");var d=document.createElement("div");d.classList.add("head");var s=document.createElement("div");s.classList.add("headWrapper"),s.innerHTML=days[t.getDay()]+'<div class="headDate">'+a.dateString+"</div>",d.appendChild(s),n.appendChild(d);var i="8:00";if(a.index>0)for(var r=1;r<schedules[a.index].length;r++){var l=schedules[a.index][r],o=makePeriodNameReplacements(l.substring(0,l.indexOf("	")),a.replacements),u=l.substring(l.indexOf("	")+1),c=u.substring(0,u.indexOf("-")),f=u.substring(u.lastIndexOf("-")+1);if(opts.showPassingPeriods){var p=document.createElement("div");p.classList.add("period"),createPeriod(p,"",i,c,t),n.appendChild(p)}i=f;var h=document.createElement("div");if(h.classList.add("period"),o.indexOf("|")>=0){var g=document.createElement("table");g.classList.add("lunch");var v=g.insertRow(-1),m=v.insertCell(-1),y=u.substring(0,u.indexOf("||"));createSubPeriods(m,o.substring(0,o.indexOf("||")),c,y.substring(y.indexOf("-")+1,y.indexOf("|")),y.substring(y.indexOf("|")+1,y.lastIndexOf("-")),f,t);var D=v.insertCell(-1),x=u.substring(u.indexOf("||")+2);createSubPeriods(D,o.substring(o.indexOf("||")+2),c,x.substring(x.indexOf("-")+1,x.indexOf("|")),x.substring(x.indexOf("|")+1,x.lastIndexOf("-")),f,t),h.appendChild(g)}else createPeriod(h,o,c,f,t);n.appendChild(h)}}function makePeriodNameReplacements(e,t){if(t.length>0)for(var a=0;a<t.length;a++)if(!t[a].indexOf(e))return t[a].substring(t[a].indexOf("->")+2);return e}function getDateFromString(e,t){var a=e.substring(0,e.indexOf(":")),n=e.substring(e.indexOf(":")+1);return 7>a&&(a=parseInt(a,10)+12),new Date(t.getFullYear(),t.getMonth(),t.getDate(),a,n)}function getDayInfo(e){for(var t,a=e.getMonth().valueOf()+1+"/"+e.getDate().valueOf()+"/"+e.getFullYear().toString().substr(-2),n=0,d=[],s=0;s<schedules[0].length;s++)schedules[0][s].indexOf(a)||(schedules[0][s].indexOf("[")>=0?(t=schedules[0][s].substring(schedules[0][s].indexOf("	")+1,schedules[0][s].indexOf("[")-1),d=schedules[0][s].substring(schedules[0][s].indexOf("[")+1,schedules[0][s].indexOf("]")).split(",")):t=schedules[0][s].substring(schedules[0][s].indexOf("	")+1),n=getScheduleIndex(t));return void 0===t&&(t=e.getDay(),n=0==t||6==t?t=0:t),{index:n,id:t,dateString:a,replacements:d}}function getScheduleIndex(e){if(0==e)return 0;for(var t=1;t<schedules.length;t++)if(e==schedules[t][0])return t;return 0}function createPeriod(e,t,a,n,d){startDate=getDateFromString(a,d),endDate=getDateFromString(n,d);var s=document.createElement("div");s.classList.add("periodWrapper"),s.periodName=t,s.start=startDate,s.end=endDate;var i=(endDate-startDate)/6e4;return i>0?(s.style.height=i-1+"px",i>=15&&(t&&(s.innerHTML=t+(30>i?" ":"<br />")+a+" – "+n),i>50&&!t.indexOf("P")&&s.classList.add("long")),e.appendChild(s)):void 0}function createSubPeriods(e,t,a,n,d,s,i){var r=document.createElement("div");if(r.classList.add("period"),createPeriod(r,t.substring(0,t.indexOf("|")),a,n,i),e.appendChild(r),opts.showPassingPeriods){var l=document.createElement("div");l.classList.add("period"),createPeriod(l,"",n,d,i),e.appendChild(l)}var o=document.createElement("div");o.classList.add("period");var u=document.createElement("div");u.classList.add("periodWrapper"),createPeriod(o,t.substring(t.indexOf("|")+1),d,s,i),e.appendChild(o)}function setHighlightedPeriod(e){e||(e=Date.now());var t=new Date(e);t.setHours(0,0,0,0);var a=document.getElementById("today"),n=[];if(a){n=Array.prototype.slice.call(a.getElementsByClassName("now"));for(var d=n.length-1;d>=0;d--){var s=n[d];s.classList.remove("now");var i=s.getElementsByClassName("periodLength")[0];i&&s.removeChild(i)}a.id=""}for(var r=document.getElementById("schedule").rows[0].cells,l=0;l<r.length;l++){var o=r[l];if(t.valueOf()==o.date){o.id="today";for(var u=o.getElementsByClassName("periodWrapper"),c=0;c<u.length;c++){var f=u[c];if(e-f.start>=0&&e-f.end<0&&(f.classList.add("now"),(f.end-f.start)/6e4>=40)){var p=(f.end-e)/6e4;f.innerHTML+='<div class="periodLength">'+(p>1?Math.round(p)+" min. left</div>":Math.round(60*p)+" sec. left</div>")}}}}if(opts.enablePeriodNotifications){for(var h=Array.prototype.slice.call(document.getElementsByClassName("now")),g=h.diff(n),v=n.diff(h),d=0;d<g.length;d++){var m=h[d].periodName;m&&!hasFocus&&sendNotification(m+" has started.",opts.notificationDuration)}for(var d=0;d<v.length;d++){var m=n[d].periodName;m&&!hasFocus&&sendNotification(m+" has ended.",opts.notificationDuration)}}}function updateSchedule(e,t){setDisplayDate(e,t),setHighlightedPeriod()}function sendNotification(e,t){if("Notification"in window){var a=new Notification(e);t>0&&setTimeout(function(){a.close()},1e3*t)}}var nav=require("./nav.js"),dateUtil=require("./dateUtil.js"),options=require("./options.js"),opts,days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],schedules,displayDate,hasFocus=!0,updateScheduleID;exports.init=function(){opts=options.options,document.addEventListener("visibilitychange",function(){document.hidden||updateSchedule(),updateUpdateInterval()}),addEventListener("focus",function(){updateSchedule(),hasFocus=!0,updateUpdateInterval()}),addEventListener("blur",function(){hasFocus=!1,updateUpdateInterval()}),parseRawSchedules()},exports.updateUpdateInterval=updateUpdateInterval,exports.updateSchedule=updateSchedule;
},{"./dateUtil.js":1,"./nav.js":4,"./options.js":5}]},{},[2])


//# sourceMappingURL=script.js.map